{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/User/Documents/indieBubba/frontend/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/User/Documents/indieBubba/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _slicedToArray from \"C:/Users/User/Documents/indieBubba/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"C:/Users/User/Documents/indieBubba/frontend/node_modules/next/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\indieBubba\\\\frontend\\\\components\\\\Modal.js\",\n    _s = $RefreshSig$();\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  query ALL_CHATS_QUERY($id: ID) {\\n    chats(\\n      where: { item: { id: { equals: $id } } }\\n      orderBy: [{ timeStamp: asc }]\\n    ) {\\n      message\\n      id\\n      timeStamp\\n      userFrom {\\n        id\\n      }\\n      item {\\n        id\\n      }\\n    }\\n  }\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  mutation CREATE_CHAT_MUTATION(\\n    $message: String!\\n    $id: ID!\\n    $pageTypeMod: String!\\n  ) {\\n    createChatter(message: $message, id: $id, pageTypeMod: $pageTypeMod) {\\n      id\\n    }\\n  }\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\n// reactstrap components\nimport { useMutation, useQuery } from '@apollo/client';\nimport gql from 'graphql-tag';\nimport { useState } from 'react';\nimport { Modal, ModalBody, ModalFooter } from 'reactstrap';\nimport styled from 'styled-components';\nimport useForm from '../lib/useForm';\nimport Form from './styles/Form';\nimport { useUser } from './User';\nvar ButtonStyles = styled.button.withConfig({\n  displayName: \"Modal__ButtonStyles\",\n  componentId: \"sc-1ssl16h-0\"\n})([\"width:auto;background:white;color:#015268;border:thin solid #000000;font-size:1.2em;font-weight:600;padding:0.5rem 1.2rem;margin-right:7px;\"]);\n_c = ButtonStyles;\nvar SmallerButtonStyles = styled.button.withConfig({\n  displayName: \"Modal__SmallerButtonStyles\",\n  componentId: \"sc-1ssl16h-1\"\n})([\"width:auto;background:white;color:#015268;border:thin solid #000000;font-size:1.5rem;font-weight:bold;padding:0.5rem 1.2rem;\"]);\n_c2 = SmallerButtonStyles;\nvar MessageReceived = styled.p.withConfig({\n  displayName: \"Modal__MessageReceived\",\n  componentId: \"sc-1ssl16h-2\"\n})([\"background:#ffffff;color:#000000;border:thin solid #000000;border-radius:10px;padding:7px;width:90%;float:left;\"]);\n_c3 = MessageReceived;\nvar MessageSent = styled.p.withConfig({\n  displayName: \"Modal__MessageSent\",\n  componentId: \"sc-1ssl16h-3\"\n})([\"background:#dfffe9;color:#000000;border:thin solid #000000;border-radius:10px;padding:7px;width:90%;float:right;\"]);\n_c4 = MessageSent;\nvar MessageSentSpan = styled.p.withConfig({\n  displayName: \"Modal__MessageSentSpan\",\n  componentId: \"sc-1ssl16h-4\"\n})([\"width:90%;float:right;text-align:right;padding-right:7px;\"]);\n_c5 = MessageSentSpan;\nvar MessageReceivedSpan = styled.p.withConfig({\n  displayName: \"Modal__MessageReceivedSpan\",\n  componentId: \"sc-1ssl16h-5\"\n})([\"width:90%;float:left;padding-left:7px;\"]);\n_c6 = MessageReceivedSpan;\nvar CREATE_CHAT_MUTATION = gql(_templateObject());\nexport var ALL_CHATS_QUERY = gql(_templateObject2());\nexport default function ModalFunction(_ref) {\n  _s();\n\n  var _this = this;\n\n  var id = _ref.id,\n      pageTypeMod = _ref.pageTypeMod;\n\n  var _useForm = useForm({\n    message: ''\n  }),\n      inputs = _useForm.inputs,\n      handleChange = _useForm.handleChange,\n      clearForm = _useForm.clearForm,\n      resetForm = _useForm.resetForm;\n\n  var theUser = useUser();\n  var theId = theUser === null || theUser === void 0 ? void 0 : theUser.id;\n\n  var _useMutation = useMutation(CREATE_CHAT_MUTATION, {\n    variables: {\n      message: inputs.message,\n      id: id,\n      pageTypeMod: pageTypeMod\n    },\n    refetchQueries: [{\n      query: ALL_CHATS_QUERY\n    }, 'ALL_CHATS_QUERY']\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      createChatter = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      loadingCreate = _useMutation2$.loadingCreate,\n      errorCreate = _useMutation2$.errorCreate,\n      dataCreate = _useMutation2$.dataCreate;\n\n  var _useQuery = useQuery(ALL_CHATS_QUERY, {\n    variables: {\n      id: id\n    }\n  }),\n      data = _useQuery.data,\n      error = _useQuery.error,\n      loading = _useQuery.loading;\n\n  var _useState = useState(false),\n      modalOpen = _useState[0],\n      setModalOpen = _useState[1];\n\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading messages...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: [\"Error: \", error.message]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 21\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [pageTypeMod === 'buyer' && /*#__PURE__*/_jsxDEV(ButtonStyles, {\n      type: \"button\",\n      onClick: function onClick() {\n        return setModalOpen(!modalOpen);\n      },\n      children: \"Contact Seller\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 9\n    }, this), pageTypeMod === 'seller' && /*#__PURE__*/_jsxDEV(ButtonStyles, {\n      type: \"button\",\n      onClick: function onClick() {\n        return setModalOpen(!modalOpen);\n      },\n      children: \"Contact Buyer\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      toggle: function toggle() {\n        return setModalOpen(!modalOpen);\n      },\n      isOpen: modalOpen,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \" modal-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \" modal-title\",\n          style: {\n            width: '90%',\n            textAlign: 'center',\n            fontSize: '1.3em'\n          },\n          children: \"Messages\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SmallerButtonStyles, {\n          \"aria-label\": \"Close\",\n          className: \" close\",\n          type: \"button\",\n          onClick: function onClick() {\n            return setModalOpen(!modalOpen);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            \"aria-hidden\": true,\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalBody, {\n        children: data.chats.map(function (chat) {\n          var dateTime = new Date(chat.timeStamp);\n          var dt = dateTime.toGMTString();\n          dt = dt.replace('GMT', '');\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [chat.userFrom.id === theId && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(MessageSentSpan, {\n                children: dt\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(MessageSent, {\n                children: chat.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 21\n              }, _this)]\n            }, void 0, true), chat.userFrom.id !== theId && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(MessageReceivedSpan, {\n                children: dt\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 21\n              }, _this), /*#__PURE__*/_jsxDEV(MessageReceived, {\n                children: chat.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 21\n              }, _this)]\n            }, void 0, true)]\n          }, chat.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 15\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ModalFooter, {\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          style: {\n            width: '100%'\n          },\n          onSubmit: /*#__PURE__*/function () {\n            var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n              var res;\n              return _regeneratorRuntime.wrap(function _callee$(_context) {\n                while (1) {\n                  switch (_context.prev = _context.next) {\n                    case 0:\n                      e.preventDefault();\n                      _context.next = 3;\n                      return createChatter();\n\n                    case 3:\n                      res = _context.sent;\n                      clearForm();\n\n                    case 5:\n                    case \"end\":\n                      return _context.stop();\n                  }\n                }\n              }, _callee);\n            }));\n\n            return function (_x) {\n              return _ref2.apply(this, arguments);\n            };\n          }(),\n          children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n            style: {\n              width: '100%',\n              marginBottom: '7px'\n            },\n            rows: \"3\",\n            required: true,\n            id: \"message\",\n            name: \"message\",\n            placeholder: \"Message\",\n            value: inputs.message,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(SmallerButtonStyles, {\n            type: \"submit\",\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(ModalFunction, \"9okm+rhfh2x1mf5kpqHFcEvGtgs=\", false, function () {\n  return [useForm, useUser, useMutation, useQuery];\n});\n\n_c7 = ModalFunction;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n\n$RefreshReg$(_c, \"ButtonStyles\");\n$RefreshReg$(_c2, \"SmallerButtonStyles\");\n$RefreshReg$(_c3, \"MessageReceived\");\n$RefreshReg$(_c4, \"MessageSent\");\n$RefreshReg$(_c5, \"MessageSentSpan\");\n$RefreshReg$(_c6, \"MessageReceivedSpan\");\n$RefreshReg$(_c7, \"ModalFunction\");","map":{"version":3,"sources":["C:/Users/User/Documents/indieBubba/frontend/components/Modal.js"],"names":["useMutation","useQuery","gql","useState","Modal","ModalBody","ModalFooter","styled","useForm","Form","useUser","ButtonStyles","button","SmallerButtonStyles","MessageReceived","p","MessageSent","MessageSentSpan","MessageReceivedSpan","CREATE_CHAT_MUTATION","ALL_CHATS_QUERY","ModalFunction","id","pageTypeMod","message","inputs","handleChange","clearForm","resetForm","theUser","theId","variables","refetchQueries","query","createChatter","loadingCreate","errorCreate","dataCreate","data","error","loading","modalOpen","setModalOpen","width","textAlign","fontSize","chats","map","chat","dateTime","Date","timeStamp","dt","toGMTString","replace","userFrom","e","preventDefault","res","marginBottom"],"mappings":"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","sourcesContent":["// reactstrap components\r\nimport { useMutation, useQuery } from '@apollo/client';\r\nimport gql from 'graphql-tag';\r\nimport { useState } from 'react';\r\nimport { Modal, ModalBody, ModalFooter } from 'reactstrap';\r\nimport styled from 'styled-components';\r\nimport useForm from '../lib/useForm';\r\nimport Form from './styles/Form';\r\nimport { useUser } from './User';\r\n\r\nconst ButtonStyles = styled.button`\r\n  width: auto;\r\n  background: white;\r\n  color: #015268;\r\n  border: thin solid #000000;\r\n  font-size: 1.2em;\r\n  font-weight: 600;\r\n  padding: 0.5rem 1.2rem;\r\n  margin-right: 7px;\r\n`;\r\n\r\nconst SmallerButtonStyles = styled.button`\r\n  width: auto;\r\n  background: white;\r\n  color: #015268;\r\n  border: thin solid #000000;\r\n  font-size: 1.5rem;\r\n  font-weight: bold;\r\n  padding: 0.5rem 1.2rem;\r\n`;\r\n\r\nconst MessageReceived = styled.p`\r\n  background: #ffffff;\r\n  color: #000000;\r\n  border: thin solid #000000;\r\n  border-radius: 10px;\r\n  padding: 7px;\r\n  width: 90%;\r\n  float: left;\r\n`;\r\n\r\nconst MessageSent = styled.p`\r\n  background: #dfffe9;\r\n  color: #000000;\r\n  border: thin solid #000000;\r\n  border-radius: 10px;\r\n  padding: 7px;\r\n  width: 90%;\r\n  float: right;\r\n`;\r\n\r\nconst MessageSentSpan = styled.p`\r\n  width: 90%;\r\n  float: right;\r\n  text-align: right;\r\n  padding-right: 7px;\r\n`;\r\nconst MessageReceivedSpan = styled.p`\r\n  width: 90%;\r\n  float: left;\r\n  padding-left: 7px;\r\n`;\r\n\r\nconst CREATE_CHAT_MUTATION = gql`\r\n  mutation CREATE_CHAT_MUTATION(\r\n    $message: String!\r\n    $id: ID!\r\n    $pageTypeMod: String!\r\n  ) {\r\n    createChatter(message: $message, id: $id, pageTypeMod: $pageTypeMod) {\r\n      id\r\n    }\r\n  }\r\n`;\r\n\r\nexport const ALL_CHATS_QUERY = gql`\r\n  query ALL_CHATS_QUERY($id: ID) {\r\n    chats(\r\n      where: { item: { id: { equals: $id } } }\r\n      orderBy: [{ timeStamp: asc }]\r\n    ) {\r\n      message\r\n      id\r\n      timeStamp\r\n      userFrom {\r\n        id\r\n      }\r\n      item {\r\n        id\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nexport default function ModalFunction({ id, pageTypeMod }) {\r\n  const { inputs, handleChange, clearForm, resetForm } = useForm({\r\n    message: '',\r\n  });\r\n\r\n  const theUser = useUser();\r\n  const theId = theUser?.id;\r\n\r\n  const [createChatter, { loadingCreate, errorCreate, dataCreate }] =\r\n    useMutation(CREATE_CHAT_MUTATION, {\r\n      variables: {\r\n        message: inputs.message,\r\n        id,\r\n        pageTypeMod,\r\n      },\r\n      refetchQueries: [{ query: ALL_CHATS_QUERY }, 'ALL_CHATS_QUERY'],\r\n    });\r\n\r\n  const { data, error, loading } = useQuery(ALL_CHATS_QUERY, {\r\n    variables: {\r\n      id,\r\n    },\r\n  });\r\n\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n\r\n  if (loading) return <p>Loading messages...</p>;\r\n  if (error) return <p>Error: {error.message}</p>;\r\n  return (\r\n    <>\r\n      {pageTypeMod === 'buyer' && (\r\n        <ButtonStyles type=\"button\" onClick={() => setModalOpen(!modalOpen)}>\r\n          Contact Seller\r\n        </ButtonStyles>\r\n      )}\r\n      {pageTypeMod === 'seller' && (\r\n        <ButtonStyles type=\"button\" onClick={() => setModalOpen(!modalOpen)}>\r\n          Contact Buyer\r\n        </ButtonStyles>\r\n      )}\r\n\r\n      <Modal toggle={() => setModalOpen(!modalOpen)} isOpen={modalOpen}>\r\n        <div className=\" modal-header\">\r\n          <h5\r\n            className=\" modal-title\"\r\n            style={{ width: '90%', textAlign: 'center', fontSize: '1.3em' }}\r\n          >\r\n            Messages\r\n          </h5>\r\n          <SmallerButtonStyles\r\n            aria-label=\"Close\"\r\n            className=\" close\"\r\n            type=\"button\"\r\n            onClick={() => setModalOpen(!modalOpen)}\r\n          >\r\n            <span aria-hidden>×</span>\r\n          </SmallerButtonStyles>\r\n        </div>\r\n        <ModalBody>\r\n          {data.chats.map((chat) => {\r\n            const dateTime = new Date(chat.timeStamp);\r\n            let dt = dateTime.toGMTString();\r\n            dt = dt.replace('GMT', '');\r\n            return (\r\n              <div key={chat.id}>\r\n                {chat.userFrom.id === theId && (\r\n                  <>\r\n                    <MessageSentSpan>{dt}</MessageSentSpan>\r\n                    <MessageSent>{chat.message}</MessageSent>\r\n                  </>\r\n                )}\r\n                {chat.userFrom.id !== theId && (\r\n                  <>\r\n                    <MessageReceivedSpan>{dt}</MessageReceivedSpan>\r\n                    <MessageReceived>{chat.message}</MessageReceived>\r\n                  </>\r\n                )}\r\n              </div>\r\n            );\r\n          })}\r\n        </ModalBody>\r\n        <ModalFooter>\r\n          <Form\r\n            style={{ width: '100%' }}\r\n            onSubmit={async (e) => {\r\n              e.preventDefault();\r\n              const res = await createChatter();\r\n              clearForm();\r\n            }}\r\n          >\r\n            <textarea\r\n              style={{ width: '100%', marginBottom: '7px' }}\r\n              rows=\"3\"\r\n              required\r\n              id=\"message\"\r\n              name=\"message\"\r\n              placeholder=\"Message\"\r\n              value={inputs.message}\r\n              onChange={handleChange}\r\n            />\r\n            <SmallerButtonStyles type=\"submit\">Send</SmallerButtonStyles>\r\n          </Form>\r\n        </ModalFooter>\r\n      </Modal>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}