{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\indieBubba\\\\frontend\\\\components\\\\UpdateUser.js\";\nimport { useMutation } from '@apollo/client';\nimport gql from 'graphql-tag';\nimport useForm from '../lib/useForm';\nimport Form from './styles/Form';\nimport DisplayError from './ErrorMessage';\nimport { useUser } from './User';\nconst UPDATE_USER_MUTATION = gql`\n  mutation UPDATE_USER_MUTATION(\n    $id: ID!\n    $address: String\n    $town: String\n    $county: String\n    $postcode: String\n  ) {\n    updateUser(\n      where: { id: $id }\n      data: {\n        address: $address\n        town: $town\n        county: $county\n        postcode: $postcode\n      }\n    ) {\n      id\n      address\n      town\n      county\n      postcode\n    }\n  }\n`;\nexport default function UpdateUser() {\n  const theUser = useUser();\n  const id = theUser === null || theUser === void 0 ? void 0 : theUser.id;\n  console.log(id);\n  const [updateUser, {\n    data,\n    error,\n    loading\n  }] = useMutation(UPDATE_USER_MUTATION);\n  const {\n    inputs,\n    handleChange,\n    clearForm,\n    resetForm\n  } = useForm({\n    address: theUser === null || theUser === void 0 ? void 0 : theUser.address,\n    town: theUser === null || theUser === void 0 ? void 0 : theUser.town,\n    county: theUser === null || theUser === void 0 ? void 0 : theUser.county,\n    postcode: theUser === null || theUser === void 0 ? void 0 : theUser.postcode\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: async e => {\n        document.getElementById('updateMessage').innerHTML = '';\n        e.preventDefault();\n        const res = await updateUser({\n          variables: {\n            id,\n            address: inputs.address,\n            town: inputs.town,\n            county: inputs.county,\n            postcode: inputs.postcode\n          }\n        });\n\n        if (res) {\n          document.getElementById('updateMessage').innerHTML = 'Updated!';\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Postal Address\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        id: \"updateMessage\",\n        style: {\n          fontWeight: 'normal',\n          color: 'red'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DisplayError, {\n        error: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"fieldset\", {\n        disabled: loading,\n        \"aria-busy\": loading,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"address\",\n          children: [\"Address\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"address\",\n            name: \"address\",\n            placeholder: \"Address\",\n            value: inputs.address,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"town\",\n          children: [\"Town\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"town\",\n            name: \"town\",\n            placeholder: \"Town\",\n            value: inputs.town,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"county\",\n          children: [\"County\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"county\",\n            name: \"county\",\n            placeholder: \"County\",\n            value: inputs.county,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"postcode\",\n          children: [\"Postcode\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"postcode\",\n            name: \"postcode\",\n            placeholder: \"Postcode\",\n            value: inputs.postcode,\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Update Address\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}","map":{"version":3,"sources":["C:/Users/User/Documents/indieBubba/frontend/components/UpdateUser.js"],"names":["useMutation","gql","useForm","Form","DisplayError","useUser","UPDATE_USER_MUTATION","UpdateUser","theUser","id","console","log","updateUser","data","error","loading","inputs","handleChange","clearForm","resetForm","address","town","county","postcode","e","document","getElementById","innerHTML","preventDefault","res","variables","fontWeight","color"],"mappings":"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","sourcesContent":["import { useMutation } from '@apollo/client';\r\nimport gql from 'graphql-tag';\r\nimport useForm from '../lib/useForm';\r\nimport Form from './styles/Form';\r\nimport DisplayError from './ErrorMessage';\r\nimport { useUser } from './User';\r\n\r\nconst UPDATE_USER_MUTATION = gql`\r\n  mutation UPDATE_USER_MUTATION(\r\n    $id: ID!\r\n    $address: String\r\n    $town: String\r\n    $county: String\r\n    $postcode: String\r\n  ) {\r\n    updateUser(\r\n      where: { id: $id }\r\n      data: {\r\n        address: $address\r\n        town: $town\r\n        county: $county\r\n        postcode: $postcode\r\n      }\r\n    ) {\r\n      id\r\n      address\r\n      town\r\n      county\r\n      postcode\r\n    }\r\n  }\r\n`;\r\n\r\nexport default function UpdateUser() {\r\n  const theUser = useUser();\r\n  const id = theUser?.id;\r\n  console.log(id);\r\n\r\n  const [updateUser, { data, error, loading }] =\r\n    useMutation(UPDATE_USER_MUTATION);\r\n\r\n  const { inputs, handleChange, clearForm, resetForm } = useForm({\r\n    address: theUser?.address,\r\n    town: theUser?.town,\r\n    county: theUser?.county,\r\n    postcode: theUser?.postcode,\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <Form\r\n        onSubmit={async (e) => {\r\n          document.getElementById('updateMessage').innerHTML = '';\r\n          e.preventDefault();\r\n          const res = await updateUser({\r\n            variables: {\r\n              id,\r\n              address: inputs.address,\r\n              town: inputs.town,\r\n              county: inputs.county,\r\n              postcode: inputs.postcode,\r\n            },\r\n          });\r\n          if (res) {\r\n            document.getElementById('updateMessage').innerHTML = 'Updated!';\r\n          }\r\n        }}\r\n      >\r\n        <h2>Postal Address</h2>\r\n        <h4 id=\"updateMessage\" style={{ fontWeight: 'normal', color: 'red' }} />\r\n\r\n        <DisplayError error={error} />\r\n        <fieldset disabled={loading} aria-busy={loading}>\r\n          <label htmlFor=\"address\">\r\n            Address\r\n            <input\r\n              type=\"text\"\r\n              id=\"address\"\r\n              name=\"address\"\r\n              placeholder=\"Address\"\r\n              value={inputs.address}\r\n              onChange={handleChange}\r\n            />\r\n          </label>\r\n          <label htmlFor=\"town\">\r\n            Town\r\n            <input\r\n              type=\"text\"\r\n              id=\"town\"\r\n              name=\"town\"\r\n              placeholder=\"Town\"\r\n              value={inputs.town}\r\n              onChange={handleChange}\r\n            />\r\n          </label>\r\n          <label htmlFor=\"county\">\r\n            County\r\n            <input\r\n              type=\"text\"\r\n              id=\"county\"\r\n              name=\"county\"\r\n              placeholder=\"County\"\r\n              value={inputs.county}\r\n              onChange={handleChange}\r\n            />\r\n          </label>\r\n          <label htmlFor=\"postcode\">\r\n            Postcode\r\n            <input\r\n              type=\"text\"\r\n              id=\"postcode\"\r\n              name=\"postcode\"\r\n              placeholder=\"Postcode\"\r\n              value={inputs.postcode}\r\n              onChange={handleChange}\r\n            />\r\n          </label>\r\n\r\n          <button type=\"submit\">Update Address</button>\r\n        </fieldset>\r\n      </Form>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}