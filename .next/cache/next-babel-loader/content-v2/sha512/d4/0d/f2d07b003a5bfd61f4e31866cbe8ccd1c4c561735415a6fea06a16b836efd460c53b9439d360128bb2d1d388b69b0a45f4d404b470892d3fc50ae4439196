{"ast":null,"code":"import Stripe from 'stripe';\nexport default (async (req, res) => {\n  const {\n    query: {\n      id\n    }\n  } = req;\n  const stripeConfig = new Stripe(process.env.NEXT_PRIVATE_STRIPE_KEY || '', {\n    apiVersion: '2020-08-27'\n  });\n  const accountLink = await stripeConfig.accountLinks.create({\n    account: id,\n    refresh_url: 'https://indiebubba.com/account',\n    return_url: 'https://indiebubba.com/account',\n    type: 'account_onboarding'\n  });\n\n  if (!accountLink) {\n    return res.status(404).json({\n      status: 404,\n      message: 'Not Found'\n    });\n  }\n\n  res.json({\n    accountLink\n  });\n});","map":{"version":3,"sources":["C:/Users/User/Documents/indieBubba/frontend/pages/api/link/[id].js"],"names":["Stripe","req","res","query","id","stripeConfig","process","env","NEXT_PRIVATE_STRIPE_KEY","apiVersion","accountLink","accountLinks","create","account","refresh_url","return_url","type","status","json","message"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,QAAnB;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACjC,QAAM;AACJC,IAAAA,KAAK,EAAE;AAAEC,MAAAA;AAAF;AADH,MAEFH,GAFJ;AAIA,QAAMI,YAAY,GAAG,IAAIL,MAAJ,CAAWM,OAAO,CAACC,GAAR,CAAYC,uBAAZ,IAAuC,EAAlD,EAAsD;AACzEC,IAAAA,UAAU,EAAE;AAD6D,GAAtD,CAArB;AAIA,QAAMC,WAAW,GAAG,MAAML,YAAY,CAACM,YAAb,CAA0BC,MAA1B,CAAiC;AACzDC,IAAAA,OAAO,EAAET,EADgD;AAEzDU,IAAAA,WAAW,EAAE,gCAF4C;AAGzDC,IAAAA,UAAU,EAAE,gCAH6C;AAIzDC,IAAAA,IAAI,EAAE;AAJmD,GAAjC,CAA1B;;AAOA,MAAI,CAACN,WAAL,EAAkB;AAChB,WAAOR,GAAG,CAACe,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AAC1BD,MAAAA,MAAM,EAAE,GADkB;AAE1BE,MAAAA,OAAO,EAAE;AAFiB,KAArB,CAAP;AAID;;AAEDjB,EAAAA,GAAG,CAACgB,IAAJ,CAAS;AAAER,IAAAA;AAAF,GAAT;AACD,CAxBD","sourcesContent":["import Stripe from 'stripe';\r\n\r\nexport default async (req, res) => {\r\n  const {\r\n    query: { id },\r\n  } = req;\r\n\r\n  const stripeConfig = new Stripe(process.env.NEXT_PRIVATE_STRIPE_KEY || '', {\r\n    apiVersion: '2020-08-27',\r\n  });\r\n\r\n  const accountLink = await stripeConfig.accountLinks.create({\r\n    account: id,\r\n    refresh_url: 'https://indiebubba.com/account',\r\n    return_url: 'https://indiebubba.com/account',\r\n    type: 'account_onboarding',\r\n  });\r\n\r\n  if (!accountLink) {\r\n    return res.status(404).json({\r\n      status: 404,\r\n      message: 'Not Found',\r\n    });\r\n  }\r\n\r\n  res.json({ accountLink });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}